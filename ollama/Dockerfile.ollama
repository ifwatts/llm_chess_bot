FROM alpine:3.18

# Install dependencies
RUN apk add --no-cache \
    curl \
    ca-certificates \
    bash

# Create directory for Ollama
WORKDIR /app

# Download and install Ollama
RUN curl -L https://ollama.ai/download/ollama-linux-amd64 -o /usr/local/bin/ollama && \
    chmod +x /usr/local/bin/ollama

# Expose Ollama API port
EXPOSE 11434

# Set up entrypoint
COPY entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh

ENTRYPOINT ["/app/entrypoint.sh"]